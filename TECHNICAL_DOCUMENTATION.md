# üìö –¢–µ—Ö–Ω—ñ—á–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è - –í—Ç–µ—á–∞ –≤—ñ–¥ –¢–¶–ö

**–í–µ—Ä—Å—ñ—è:** beta v0.2.1  
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** –°—ñ—á–µ–Ω—å 2026  
**Engine:** Phaser 3.80.1

---

## üìã –ó–º—ñ—Å—Ç

1. [–û–≥–ª—è–¥ –ü—Ä–æ–µ–∫—Ç—É](#–æ–≥–ª—è–¥-–ø—Ä–æ–µ–∫—Ç—É)
2. [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç—É](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç—É)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª—ñ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª—ñ–≤)
4. [–°–∏—Å—Ç–µ–º–∏](#—Å–∏—Å—Ç–µ–º–∏)
5. [–°—Ü–µ–Ω–∏](#—Å—Ü–µ–Ω–∏)
6. [–Ü–≥—Ä–æ–≤—ñ –û–±'—î–∫—Ç–∏ (Entities)](#—ñ–≥—Ä–æ–≤—ñ-–æ–±—î–∫—Ç–∏-entities)
7. [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ì—Ä–∏](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è-–≥—Ä–∏)
8. [UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#ui-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
9. [–ê—É–¥—ñ–æ –°–∏—Å—Ç–µ–º–∞](#–∞—É–¥—ñ–æ-—Å–∏—Å—Ç–µ–º–∞)
10. [–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –î–∞–Ω–∏—Ö](#–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è-–¥–∞–Ω–∏—Ö)
11. [–¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ](#—Ç–µ—Ö–Ω—ñ—á–Ω—ñ-–¥–µ—Ç–∞–ª—ñ)

---

## üéÆ –û–≥–ª—è–¥ –ü—Ä–æ–µ–∫—Ç—É

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –ì—Ä–∏
"–í—Ç–µ—á–∞ –≤—ñ–¥ –¢–¶–ö" - —Ü–µ 2D –∞—Ä–∫–∞–¥–Ω–∞ –≥—Ä–∞ –ø—Ä–æ –≤—Ç–µ—á—É –≤—ñ–¥ –ø–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞—á—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç—ñ –º—ñ—Å—Ç–∞. –ì—Ä–∞–≤–µ—Ü—å –ø–æ–≤–∏–Ω–µ–Ω –∑–±–∏—Ä–∞—Ç–∏ –≥—Ä–æ—à—ñ, –æ–±–º—ñ–Ω—é–≤–∞—Ç–∏ —ó—Ö –Ω–∞ –¥–æ–ª–∞—Ä–∏ —Ç–∞ —É–Ω–∏–∫–∞—Ç–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è.

### –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –°—Ç–µ–∫
- **Engine:** Phaser 3 (Canvas/WebGL —Ä–µ–Ω–¥–µ—Ä—ñ–Ω–≥)
- **–ú–æ–≤–∞:** JavaScript (ES6 –º–æ–¥—É–ª—ñ)
- **–ê—É–¥—ñ–æ:** Web Audio API —á–µ—Ä–µ–∑ Phaser Sound Manager
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è:** localStorage (–±—Ä–∞—É–∑–µ—Ä–Ω–∏–π)
- **–ö–∞—Ä—Ç–∞:** Tilemap —Å–∏—Å—Ç–µ–º–∞ –∑ collision detection —á–µ—Ä–µ–∑ –ø—ñ–∫—Å–µ–ª—å–Ω—ñ –¥–∞–Ω—ñ

### –û—Å–Ω–æ–≤–Ω—ñ –ú–µ—Ö–∞–Ω—ñ–∫–∏
1. **–†—É—Ö –≥—Ä–∞–≤—Ü—è** - WASD/–°—Ç—Ä—ñ–ª–∫–∏, dash (Shift), slide (Space)
2. **–°–∏—Å—Ç–µ–º–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è** - –ø–æ–≤—ñ–ª—å–Ω–µ –Ω–∞—Ä–æ—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏ –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—ñ –≤–æ—Ä–æ–≥—ñ–≤
3. **–ï–∫–æ–Ω–æ–º—ñ–∫–∞** - –∑–±—ñ—Ä –≥—Ä–æ—à–µ–π (–≥—Ä–∏–≤–Ω—ñ) ‚Üí –æ–±–º—ñ–Ω –Ω–∞ –¥–æ–ª–∞—Ä–∏ –≤ –æ–±–º—ñ–Ω–Ω–∏–∫–∞—Ö
4. **–ü–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è** - AI –≤–æ—Ä–æ–≥—ñ–≤ –∑ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—î—é –ø–æ –∫–∞—Ä—Ç—ñ
5. **–ü–µ—Ä–µ—à–∫–æ–¥–∏** - –º–∞—à–∏–Ω–∏, —Å—Ç—Ä—ñ—á–∫–∏, –∫–∞–ª—é–∂—ñ
6. **–ë–æ–Ω—É—Å–∏** - —Å–∫—É—Ç–µ—Ä–∏ (–ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è), —Ö–º–∞—Ä–∫–∏ (–∑–∞–º–æ—Ä–æ–∑–∫–∞ –≤–æ—Ä–æ–≥—ñ–≤)

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç—É

### –ü–∞—Ç–µ—Ä–Ω–∏ –ü—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è

#### 1. **Scene Pattern** (Phaser —Å—Ü–µ–Ω–∏)
–ì—Ä–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∞ –Ω–∞ –æ–∫—Ä–µ–º—ñ —Å—Ü–µ–Ω–∏, –∫–æ–∂–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Å–≤–æ—é —á–∞—Å—Ç–∏–Ω—É:
- `BootScene` - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
- `MenuScene` - –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
- `GameScene` - –æ—Å–Ω–æ–≤–Ω–∞ –≥–µ–π–º–ø–ª–µ–π–Ω–∞ —Å—Ü–µ–Ω–∞
- `ResultScene` - –µ–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- `ShopScene` - –º–∞–≥–∞–∑–∏–Ω –ø–æ–∫—É–ø–æ–∫

#### 2. **Entity Component Pattern**
–Ü–≥—Ä–æ–≤—ñ –æ–±'—î–∫—Ç–∏ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å—Å—è –≤—ñ–¥ –±–∞–∑–æ–≤–∏—Ö –∫–ª–∞—Å—ñ–≤ Phaser:
- `Player extends Phaser.Physics.Arcade.Sprite`
- `Chaser extends Phaser.Physics.Arcade.Sprite`
- `Bonus extends Phaser.GameObjects.Container`

#### 3. **System Pattern**
–û–∫—Ä–µ–º—ñ —Å–∏—Å—Ç–µ–º–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏ –≥—Ä–∏:
- `AudioManager` - —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–≤—É–∫–∞–º–∏
- `CaptureSystem` - –ª–æ–≥—ñ–∫–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
- `NavigationSystem` - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–ª—è AI
- `SaveSystem` - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
- `TilemapSystem` - —Ä–æ–±–æ—Ç–∞ –∑ –∫–∞—Ä—Ç–æ—é

#### 4. **Observer Pattern**
Phaser Events –¥–ª—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:
```javascript
this.events.on('capture-complete', () => {...});
this.scene.events.on('shutdown', () => {...});
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª—ñ–≤

```
busification_run/
‚îú‚îÄ‚îÄ index.html                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É, HTML –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.js                 # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Phaser –≥—Ä–∏
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gameConfig.js       # –í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏
‚îÇ   ‚îú‚îÄ‚îÄ scenes/                 # –°—Ü–µ–Ω–∏ –≥—Ä–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BootScene.js        # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MenuScene.js        # –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameScene.js        # –û—Å–Ω–æ–≤–Ω–∞ –≥—Ä–∞ (2000+ —Ä—è–¥–∫—ñ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResultScene.js      # –ï–∫—Ä–∞–Ω –ø—Ä–æ–≥—Ä–∞—à—É
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ShopScene.js        # –ú–∞–≥–∞–∑–∏–Ω
‚îÇ   ‚îú‚îÄ‚îÄ entities/               # –Ü–≥—Ä–æ–≤—ñ –æ–±'—î–∫—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Player.js           # –ì—Ä–∞–≤–µ—Ü—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chaser.js           # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –≤–æ—Ä–æ–≥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChaserBlocker.js    # –í–æ—Ä–æ–≥-–±–ª–æ–∫—É–≤–∞–ª—å–Ω–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ChaserSticker.js    # –í–æ—Ä–æ–≥-–∞—Ç–∞–∫—É–≤–∞–ª—å–Ω–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Car.js              # –ú–∞—à–∏–Ω–∞-–ø–µ—Ä–µ—à–∫–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Obstacle.js         # –ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ—à–∫–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TapeGate.js         # –°—Ç—Ä—ñ—á–∫–∞-–ø–µ—Ä–µ—à–∫–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PuddleSlip.js       # –ö–∞–ª—é–∂–∞ (—Å–ª–∏–∑—å–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Coin.js             # –ú–æ–Ω–µ—Ç–∞ (–≥—Ä–∏–≤–Ω—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Bonus.js            # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –±–æ–Ω—É—Å—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Exchange.js         # –û–±–º—ñ–Ω–Ω–∏–∫ –≤–∞–ª—é—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaperStack.js       # –°—Ç–æ–ø–∫–∞ –ø–∞–ø–µ—Ä—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bonuses/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Scooter.js      # –ë–æ–Ω—É—Å: —Å–∫—É—Ç–µ—Ä
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ SmokeCloud.js   # –ë–æ–Ω—É—Å: –¥–∏–º–æ–≤–∞ —Ö–º–∞—Ä–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ systems/                # –°–∏—Å—Ç–µ–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AudioManager.js     # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞—É–¥—ñ–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CaptureSystem.js    # –°–∏—Å—Ç–µ–º–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NavigationSystem.js # –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–ª—è AI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PathfindingSystem.js # A* –ø–æ—à—É–∫ —à–ª—è—Ö—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SaveSystem.js       # –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TilemapSystem.js    # –†–æ–±–æ—Ç–∞ –∑ –∫–∞—Ä—Ç–æ—é
‚îÇ   ‚îú‚îÄ‚îÄ ui/                     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HUD.js              # –ì–æ–ª–æ–≤–Ω–∏–π UI (–≥—Ä–æ—à—ñ, —Å—Ç–∞–º—ñ–Ω–∞, capture)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Minimap.js          # –ú—ñ–Ω—ñ–∫–∞—Ä—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ButtonHelper.js     # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SpriteManager.js    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ø—Ä–∞–π—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ assets/                 # –†–µ—Å—É—Ä—Å–∏
‚îÇ       ‚îú‚îÄ‚îÄ textures/           # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è
‚îÇ       ‚îú‚îÄ‚îÄ sounds/             # –ó–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ music/              # –ú—É–∑–∏–∫–∞
```

---

## üîß –°–∏—Å—Ç–µ–º–∏

### 1. AudioManager (`src/systems/AudioManager.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤—Å—ñ–º–∞ –∑–≤—É–∫–∞–º–∏ —Ç–∞ –º—É–∑–∏–∫–æ—é –≤ –≥—Ä—ñ.

**–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞ –∑ crossfade –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è sound effects
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≤ localStorage
- –î–∏–Ω–∞–º—ñ—á–Ω–∞ –∑–º—ñ–Ω–∞ –≥—É—á–Ω–æ—Å—Ç—ñ
- –ü–∞—É–∑–∞/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑–≤—É–∫—ñ–≤

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
init()                          // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è, –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
startMusic()                    // –°—Ç–∞—Ä—Ç —Ñ–æ–Ω–æ–≤–æ—ó –º—É–∑–∏–∫–∏
stopMusic()                     // –ó—É–ø–∏–Ω–∫–∞ –º—É–∑–∏–∫–∏
pauseMusic() / resumeMusic()    // –ü–∞—É–∑–∞/–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è
playSound(key, loop, volume)    // –í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—É–∫—É
stopSound(key)                  // –ó—É–ø–∏–Ω–∫–∞ –∑–≤—É–∫—É
setMusicVolume(volume)          // –ó–º—ñ–Ω–∞ –≥—É—á–Ω–æ—Å—Ç—ñ –º—É–∑–∏–∫–∏
setSoundsVolume(volume)         // –ó–º—ñ–Ω–∞ –≥—É—á–Ω–æ—Å—Ç—ñ –∑–≤—É–∫—ñ–≤
setMusicEnabled(enabled)        // –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –º—É–∑–∏–∫–∏
setSoundsEnabled(enabled)       // –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –∑–≤—É–∫—ñ–≤
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:**
```javascript
{
    musicVolume: 0.5,           // 0-1
    musicEnabled: true,
    soundsVolume: 0.7,
    soundsEnabled: true,
    currentTrack: null,         // Phaser Sound –æ–±'—î–∫—Ç
    musicTracks: [...],         // –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–∫—ñ–≤
    sounds: {}                  // –û–±'—î–∫—Ç –∑–≤—É–∫—ñ–≤ {key: Sound}
}
```

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ú—É–∑–∏—á–Ω—ñ —Ç—Ä–µ–∫–∏ –≤–∏–±–∏—Ä–∞—é—Ç—å—Å—è –≤–∏–ø–∞–¥–∫–æ–≤–æ –∑ –ø–µ—Ä–µ–º—ñ—à–∞–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É
- Crossfade —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ tween –¥–ª—è –ø–ª–∞–≤–Ω–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤
- –í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `localStorage.audioSettings`
- –ó–≤—É–∫–∏ –º–æ–∂—É—Ç—å –º–∞—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –∫–ª—é—á—ñ –¥–ª—è –±–∞–≥–∞—Ç–æ—Ä–∞–∑–æ–≤–æ–≥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è

---

### 2. CaptureSystem (`src/systems/CaptureSystem.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ–º –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –≤–æ—Ä–æ–≥–∞–º–∏.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. **–ì—Ä–∞–¥—É–∞–ª—å–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è (Blocker):**
   - –í–æ—Ä–æ–≥ —Ç–∏–ø—É "Blocker" –ø–æ–≤—ñ–ª—å–Ω–æ –∑–∞–ø–æ–≤–Ω—é—î —à–∫–∞–ª—É –ø–æ–∫–∏ –ø–æ–±–ª–∏–∑—É
   - –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ –¥–æ –≥—Ä–∞–≤—Ü—è
   - –§–æ—Ä–º—É–ª–∞: `fillRate = (maxDist - actualDist) / maxDist * baseRate`

2. **Burst –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è (Sticker):**
   - –í–æ—Ä–æ–≥ —Ç–∏–ø—É "Sticker" –∑–∞–ø–æ–≤–Ω—é—î —à–∫–∞–ª—É —Ä—ñ–∑–∫–æ –ø—Ä–∏ —É–¥–∞—Ä—ñ
   - –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `addCaptureBurst(amount)`
   - –ù–µ –∑–∞–ø–æ–≤–Ω—é—î –ø–æ—Å—Ç—É–ø–æ–≤–æ, —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ

3. **–°–ø–∞–¥ (Decay):**
   - –ö–æ–ª–∏ –≤–æ—Ä–æ–≥—ñ–≤ –Ω–µ–º–∞—î –ø–æ–±–ª–∏–∑—É, —à–∫–∞–ª–∞ –ø–æ–≤—ñ–ª—å–Ω–æ —Å–ø–∞–¥–∞—î
   - –®–≤–∏–¥–∫—ñ—Å—Ç—å —Å–ø–∞–¥—É: `CAPTURE_DECAY_RATE` –∑ –∫–æ–Ω—Ñ—ñ–≥—É

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
update(delta, chasers, player)  // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–µ–Ω –∫–∞–¥—Ä
addCaptureBurst(amount)         // –î–æ–¥–∞—Ç–∏ burst (–¥–ª—è Sticker)
getCapturePercentage()          // –û—Ç—Ä–∏–º–∞—Ç–∏ % (0-100)
reset()                         // –°–∫–∏–Ω—É—Ç–∏ –¥–æ 0
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:**
```javascript
{
    captureProgress: 0,         // 0-100
    maxCapture: 100,
    captureIncreaseRate: 0.5,   // –ó–∞ —Å–µ–∫—É–Ω–¥—É –ø—Ä–∏ –±–ª–∏–∑—å–∫–æ–º—É Blocker
    captureDecayRate: 2,        // –°–ø–∞–¥ –∑–∞ —Å–µ–∫—É–Ω–¥—É
    maxCaptureDistance: 200     // –ú–∞–∫—Å. –¥–∏—Å—Ç–∞–Ω—Ü—ñ—è –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è
}
```

---

### 3. NavigationSystem (`src/systems/NavigationSystem.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –¥–ª—è AI –≤–æ—Ä–æ–≥—ñ–≤ –ø–æ –∫–∞—Ä—Ç—ñ –∑ —É–Ω–∏–∫–Ω–µ–Ω–Ω—è–º –ø–µ—Ä–µ—à–∫–æ–¥.

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `PathfindingSystem` –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ —à–ª—è—Ö—É
2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î walkability —á–µ—Ä–µ–∑ `TilemapSystem`
3. –û–Ω–æ–≤–ª—é—î —à–ª—è—Ö –∫–æ–∂–Ω—ñ 500–º—Å (–Ω–µ –∫–æ–∂–µ–Ω –∫–∞–¥—Ä –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó)
4. –†—É—Ö–∞—î –≤–æ—Ä–æ–≥–∞ –ø–æ —Ç–æ—á–∫–∞—Ö —à–ª—è—Ö—É

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
setTarget(x, y)                 // –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ü—ñ–ª—å —Ä—É—Ö—É
update(delta)                   // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä—É—Ö—É
getCurrentPath()                // –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —à–ª—è—Ö
clearPath()                     // –û—á–∏—Å—Ç–∏—Ç–∏ —à–ª—è—Ö
```

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**
- –®–ª—è—Ö –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –Ω–µ —á–∞—Å—Ç—ñ—à–µ –Ω—ñ–∂ —Ä–∞–∑ –Ω–∞ 500–º—Å
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–µ –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è —à–ª—è—Ö—É
- –ü—Ä–æ–º—ñ–∂–Ω—ñ —Ç–æ—á–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è —è–∫—â–æ —î –ø—Ä—è–º–∞ –ª—ñ–Ω—ñ—è

---

### 4. TilemapSystem (`src/systems/TilemapSystem.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –†–æ–±–æ—Ç–∞ –∑ –∫–∞—Ä—Ç–æ—é —á–µ—Ä–µ–∑ –∞–Ω–∞–ª—ñ–∑ collision map (JPEG –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ –∑–æ–Ω–∞–º–∏).

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î `collision_map.jpeg` —Ç–∞ `road_graph.jpeg`
2. –°—Ç–≤–æ—Ä—é—î canvas –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø—ñ–∫—Å–µ–ª—ñ–≤
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–ª—ñ—Ä –ø—ñ–∫—Å–µ–ª—è –Ω–∞ –∑–∞–¥–∞–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
4. –í–∏–∑–Ω–∞—á–∞—î —Ç–∏–ø —Ç–∞–π–ª—É –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º

**–ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞:**
```javascript
Walkable (–∑–µ–ª–µ–Ω–∏–π):  RGB(0, 255, 0)
Road (—Å—ñ—Ä–∏–π):        RGB(128, 128, 128) 
Water (—Å–∏–Ω—ñ–π):       RGB(0-10, 0-10, 250-255)
Collision (—á–æ—Ä–Ω–∏–π):  RGB(0, 0, 0)
```

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
isWalkable(x, y)               // –ß–∏ –º–æ–∂–Ω–∞ —Ö–æ–¥–∏—Ç–∏
isRoad(x, y)                   // –ß–∏ —Ü–µ –¥–æ—Ä–æ–≥–∞
isWater(x, y)                  // –ß–∏ —Ü–µ –≤–æ–¥–∞
getTileType(x, y)              // –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–∏–ø —Ç–∞–π–ª—É
getPixelColor(x, y)            // –û—Ç—Ä–∏–º–∞—Ç–∏ RGB –∫–æ–ª—ñ—Ä
```

---

### 5. SaveSystem (`src/systems/SaveSystem.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –≥—Ä–∞–≤—Ü—è –≤ localStorage.

**–©–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è:**
```javascript
{
    bankedMoney: 0,            // –î–æ–ª–∞—Ä–∏ –≤ –±–∞–Ω–∫—É
    totalMoneyCollected: 0,    // –í—Å—å–æ–≥–æ –∑—ñ–±—Ä–∞–Ω–æ –∑–∞ –≤—Å—ñ —Å–µ—Å—ñ—ó
    totalPlayTime: 0,          // –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –≥—Ä–∏ (–º—Å)
    gamesPlayed: 0,            // –ö—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–≥–æ—Ä
    bestSurvivalTime: 0,       // –ù–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å –≤–∏–∂–∏–≤–∞–Ω–Ω—è
    lastPlayed: Date.now()     // –û—Å—Ç–∞–Ω–Ω—è –≥—Ä–∞
}
```

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
static save(data)              // –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ
static load()                  // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ
static clear()                 // –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ
static updateStats(newData)    // –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```

---

## üé¨ –°—Ü–µ–Ω–∏

### 1. BootScene (`src/scenes/BootScene.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø–µ—Ä–µ–¥ –≥—Ä–æ—é.

**–©–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è:**

1. **–¢–µ–∫—Å—Ç—É—Ä–∏:**
   - –ö–∞—Ä—Ç–∞ (`map.jpeg`)
   - Collision map (`collision_map.jpeg`)
   - Road graph (`road_graph.jpeg`)
   - –¢–µ–∫—Å—Ç—É—Ä–∏ –≥—Ä–∞–≤—Ü—è, –≤–æ—Ä–æ–≥—ñ–≤, –º–∞—à–∏–Ω
   - –¢–µ–∫—Å—Ç—É—Ä–∏ –ø—ñ–∫–∞–ø—ñ–≤, –±–æ–Ω—É—Å—ñ–≤, –ø–µ—Ä–µ—à–∫–æ–¥
   - –§–æ–Ω–∏ –º–µ–Ω—é

2. **–ê—É–¥—ñ–æ:**
   - –ú—É–∑–∏–∫–∞ (8 —Ç—Ä–µ–∫—ñ–≤: back_1 - back_8)
   - –ó–≤—É–∫–∏ —Ä—É—Ö—É (running, engine sounds)
   - –ó–≤—É–∫–∏ –¥—ñ–π (money, drink, exchange, pickup, fall)
   - –ó–≤—É–∫–∏ –º–µ–Ω—é (hover, choice)
   - Ambient sounds (birds, wind, river)

3. **–Ü–Ω—à–µ:**
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ–π –¥–ª—è –≤—Å—ñ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂—ñ–≤
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è physics world bounds

**–ü—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ `MenuScene`

---

### 2. MenuScene (`src/scenes/MenuScene.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é –≥—Ä–∏

**–ï–ª–µ–º–µ–Ω—Ç–∏ UI:**
- –§–æ–Ω–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–µ –º–µ–Ω—é –∑ –∫–Ω–æ–ø–∫–∞–º–∏:
  - –ì–†–ê–¢–ò
  - –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø (–∞—É–¥—ñ–æ)
  - –ü–†–û –ì–†–£ (—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è)
  - –î–û–ù–ê–¢ –ù–ê –ó–°–£
- –í–µ—Ä—Å—ñ—è –≥—Ä–∏ (–∑–≤–µ—Ä—Ö—É –∑–ª—ñ–≤–∞)
- –ë–∞–Ω–µ—Ä –≤–Ω–∏–∑—É –∑ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä–æ–º

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è `AudioManager`
- –û–±—Ä–æ–±–∫–∞ autoplay policy –±—Ä–∞—É–∑–µ—Ä–∞
- –ó–≤—É–∫–∏ hover/click –¥–ª—è –∫–Ω–æ–ø–æ–∫
- –ú–µ–Ω—é –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∑ —Å–ª–∞–π–¥–µ—Ä–∞–º–∏
- –ú–µ–Ω—é "–ü—Ä–æ –≥—Ä—É" –∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ—é

**–ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –≥—Ä–∏:** `this.scene.start('GameScene')`

---

### 3. GameScene (`src/scenes/GameScene.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –û—Å–Ω–æ–≤–Ω–∞ –≥–µ–π–º–ø–ª–µ–π–Ω–∞ —Å—Ü–µ–Ω–∞ (–Ω–∞–π–±—ñ–ª—å—à–∞, ~2500 —Ä—è–¥–∫—ñ–≤)

#### –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (`create()`)

1. **–ö–∞—Ä—Ç–∞ —Ç–∞ —Å–≤—ñ—Ç:**
   ```javascript
   this.tilemap = new TilemapSystem(this);
   this.cameras.main.setBounds(0, 0, 4092, 4092);
   this.physics.world.setBounds(0, 0, 4092, 4092);
   ```

2. **–ì—Ä–∞–≤–µ—Ü—å:**
   ```javascript
   this.player = new Player(this, startX, startY);
   this.player.audioManager = this.audioManager;
   ```

3. **–°–∏—Å—Ç–µ–º–∏:**
   ```javascript
   this.captureSystem = new CaptureSystem(this);
   this.navigationSystem = new NavigationSystem(this, this.tilemap);
   ```

4. **UI:**
   ```javascript
   this.hud = new HUD(this);
   this.minimap = new Minimap(this, mapImage);
   ```

5. **Spawn –æ–±'—î–∫—Ç—ñ–≤:**
   - –ö—ñ–æ—Å–∫–∏ (`spawnKiosks()`)
   - –û–±–º—ñ–Ω–Ω–∏–∫–∏ (`spawnExchanges()`)
   - –í–æ—Ä–æ–≥–∏ (`spawnChaser()`)
   - –ú–∞—à–∏–Ω–∏ (`spawnCar()`)
   - –ü–µ—Ä–µ—à–∫–æ–¥–∏ (`spawnObstacles()`)
   - –ü—ñ–∫–∞–ø–∏ (`spawnPickups()`)

#### –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª (`update(delta, time)`)

1. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è:**
   ```javascript
   this.player.update(delta);
   ```

2. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–æ—Ä–æ–≥—ñ–≤:**
   ```javascript
   this.chasers.forEach(chaser => {
       if (!chaser.isFrozen) {
           chaser.update(delta, time);
       }
   });
   ```

3. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º:**
   ```javascript
   this.captureSystem.update(delta, this.chasers, this.player);
   if (this.captureSystem.getCapturePercentage() >= 100) {
       this.handleGameOver();
   }
   ```

4. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è UI:**
   ```javascript
   this.hud.update();
   this.minimap.update();
   ```

5. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ spawn:**
   ```javascript
   this.maintainPickups();
   this.checkPoliceSiren(time);
   ```

#### –ö–æ–ª—ñ–∑—ñ—ó

```javascript
// –ì—Ä–∞–≤–µ—Ü—å <-> –ú–æ–Ω–µ—Ç–∏
this.physics.add.overlap(this.player, this.pickups, 
    this.handlePickupCollision, null, this);

// –ì—Ä–∞–≤–µ—Ü—å <-> –ö—ñ–æ—Å–∫–∏
this.physics.add.overlap(this.player, this.kiosks, 
    this.handleKioskCollision, null, this);

// –ì—Ä–∞–≤–µ—Ü—å <-> –û–±–º—ñ–Ω–Ω–∏–∫–∏
this.physics.add.overlap(this.player, this.exchanges, 
    this.handleExchangeCollision, null, this);

// –ì—Ä–∞–≤–µ—Ü—å <-> –ú–∞—à–∏–Ω–∏ (–∫–∞–ª–±–µ–∫ —É Car.js)
```

#### –ö–ª—é—á–æ–≤—ñ –º–µ—Ö–∞–Ω—ñ–∫–∏

**–ó–±—ñ—Ä –≥—Ä–æ—à–µ–π:**
```javascript
handlePickupCollision(player, pickup) {
    if (pickup instanceof Coin) {
        this.currentMoney += pickup.value;
        this.audioManager.playSound('money');
        pickup.collect();
    }
}
```

**–û–±–º—ñ–Ω –≤–∞–ª—é—Ç–∏:**
```javascript
handleExchangeCollision(player, exchange) {
    const uah = this.currentMoney;
    const rate = GAME_CONFIG.EXCHANGES.EXCHANGE_RATE;
    const usd = Math.floor(uah / rate);
    
    this.currentBankedMoney += usd;
    this.currentMoney = uah % rate; // –ó–∞–ª–∏—à–æ–∫
    
    player.freeze(duration, 'exchange_sound');
}
```

**–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–º—ñ–Ω–∏:**
```javascript
handleKioskCollision(player, kiosk) {
    player.stamina = player.maxStamina;
    player.freeze(duration, 'drink');
    this.showKioskMessage(); // "–ï–Ω–µ—Ä–≥—ñ—é –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ!"
}
```

#### –ü–∞—É–∑–∞

```javascript
pauseGame() {
    this.isPaused = true;
    this.physics.world.isPaused = true;
    this.audioManager.pauseMusic();
    // –ó—É–ø–∏–Ω–∫–∞ –≤—Å—ñ—Ö –∑–≤—É–∫—ñ–≤
    // –ü–æ–∫–∞–∑ –º–µ–Ω—é –ø–∞—É–∑–∏
}

resumeGame() {
    this.isPaused = false;
    this.physics.world.isPaused = false;
    this.audioManager.resumeMusic();
    // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤—É–∫—ñ–≤
}
```

#### Game Over

```javascript
handleGameOver() {
    const survivalTime = this.time.now - this.gameStartTime;
    
    // –ó—É–ø–∏–Ω–∫–∞ –≤—Å—ñ—Ö –∑–≤—É–∫—ñ–≤
    this.player.stopRunningSound();
    this.chasers.forEach(c => c.stopRunningSound());
    this.audioManager.stopMusic();
    
    // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
    SaveSystem.updateStats({
        bankedMoney: this.currentBankedMoney,
        moneyAddedThisGame: this.moneyAddedThisGame,
        timeSurvived: survivalTime
    });
    
    // –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ ResultScene
    this.scene.start('ResultScene', {
        currentBankedMoney: this.currentBankedMoney,
        moneyAddedThisGame: this.moneyAddedThisGame,
        timeSurvived: survivalTime
    });
}
```

---

### 4. ResultScene (`src/scenes/ResultScene.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ï–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø—ñ—Å–ª—è –ø—Ä–æ–≥—Ä–∞—à—É

**–í—ñ–¥–æ–±—Ä–∞–∂–∞—î:**
- –ë–∞–Ω–∫ (–∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–æ–ª–∞—Ä–∏)
- –ó–∞—Ä–æ–±–ª–µ–Ω–æ —Ü—ñ—î—ó –≥—Ä–∏
- –ß–∞—Å –≤–∏–∂–∏–≤–∞–Ω–Ω—è

**–ö–Ω–æ–ø–∫–∏:**
- –ú–ê–ì–ê–ó–ò–ù (–ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ ShopScene)
- –ú–ï–ù–Æ (–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ MenuScene)

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –í—ñ–¥—Ç–≤–æ—Ä—é—î –º—É–∑–∏–∫—É `gameover.mp3` –æ–¥–∏–Ω —Ä–∞–∑
- –ó—É–ø–∏–Ω—è—î –º—É–∑–∏–∫—É –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ —Å—Ü–µ–Ω–∏

---

### 5. ShopScene (`src/scenes/ShopScene.js`)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ú–∞–≥–∞–∑–∏–Ω –ø–æ–∫—É–ø–æ–∫ (–ø–æ–∫–∏ –ø–æ—Ä–æ–∂–Ω—ñ–π, –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –∞–ø–≥—Ä–µ–π–¥—ñ–≤)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–ú–ê–ì–ê–ó–ò–ù"
- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–µ –º–µ–Ω—é
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–ù–µ–∑–∞–±–∞—Ä–æ–º —Ç—É—Ç –∑'—è–≤–ª—è—Ç—å—Å—è –ø–æ–∫—É–ø–∫–∏!"
- –ö–Ω–æ–ø–∫–∞ "–ù–ê–ó–ê–î"

---

## üëæ –Ü–≥—Ä–æ–≤—ñ –û–±'—î–∫—Ç–∏ (Entities)

### Player (`src/entities/Player.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.Physics.Arcade.Sprite`

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
```javascript
{
    speed: 200,                 // –ë–∞–∑–æ–≤–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å
    dashSpeed: 400,             // –®–≤–∏–¥–∫—ñ—Å—Ç—å dash
    stamina: 100,               // –ü–æ—Ç–æ—á–Ω–∞ —Å—Ç–∞–º—ñ–Ω–∞
    maxStamina: 100,
    staminaDrainRate: 20,       // –°–ø–∞–¥ —Å—Ç–∞–º—ñ–Ω–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—É –ø—Ä–∏ dash
    staminaRegenRate: 10,       // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–º—ñ–Ω–∏
    isFrozen: false,            // –ó–∞–º–æ—Ä–æ–∂–µ–Ω–∏–π?
    isFalling: false,           // –ü–∞–¥–∞—î?
    isSliding: false,           // –ö–æ–≤–∑–∞—î –ø—ñ–¥ —Å—Ç—Ä—ñ—á–∫–æ—é?
    currentSpeed: 0,            // –ü–æ—Ç–æ—á–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å (–¥–ª—è –∑–≤—É–∫—É)
    immunities: {},             // –Ü–º—É–Ω—ñ—Ç–µ—Ç–∏ –¥–æ —Ä—ñ–∑–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤
    audioManager: null          // –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ AudioManager
}
```

**–°—Ç–∞–Ω–∏ —Ä—É—Ö—É:**
- `IDLE` - —Å—Ç–æ—ó—Ç—å
- `WALK` - —Ö–æ–¥—å–±–∞ (WASD/–°—Ç—Ä—ñ–ª–∫–∏)
- `DASH` - —Ä–∏–≤–æ–∫ (Shift + –Ω–∞–ø—Ä—è–º–æ–∫)
- `SLIDE` - –ø—ñ–¥—Å–ª–∏–∑–Ω–µ–Ω–Ω—è (Space)
- `FROZEN` - –∑–∞–º–æ—Ä–æ–∂–µ–Ω–∏–π (–∫—ñ–æ—Å–∫/–æ–±–º—ñ–Ω–Ω–∏–∫)
- `FALLING` - –ø–∞–¥—ñ–Ω–Ω—è (–∑–±–∏–≤ –∞–≤—Ç–æ–º–æ–±—ñ–ª—å)

**–ê–Ω—ñ–º–∞—Ü—ñ—ó:**
–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–º–∫—É (front, rear, left, right):
- `player_walk_front` (4 –∫–∞–¥—Ä–∏)
- `player_walk_rear` (4 –∫–∞–¥—Ä–∏)
- `player_walk_left` (4 –∫–∞–¥—Ä–∏)
- `player_walk_right` (4 –∫–∞–¥—Ä–∏)
- `player_fall` (2 –∫–∞–¥—Ä–∏)
- `player_standing_front/rear/left/right`

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
update(delta)                   // –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
handleMovement()                // –û–±—Ä–æ–±–∫–∞ —Ä—É—Ö—É
handleDash()                    // –û–±—Ä–æ–±–∫–∞ dash
updateStamina(delta)            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–º—ñ–Ω–∏
updateAnimation()               // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ–π
updateSounds()                  // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤—É–∫—ñ–≤ —Ä—É—Ö—É
freeze(duration, soundKey)      // –ó–∞–º–æ—Ä–æ–∑–∏—Ç–∏ –≥—Ä–∞–≤—Ü—è
triggerFall()                   // –¢—Ä–∏–≥–µ—Ä –ø–∞–¥—ñ–Ω–Ω—è
applyImmunity(type, duration)   // –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —ñ–º—É–Ω—ñ—Ç–µ—Ç
```

**–ó–≤—É–∫–∏:**
- `running.mp3` - –∑–≤—É–∫ –±—ñ–≥—É (loop, –¥–∏–Ω–∞–º—ñ—á–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å playback)
- –ì—Ä–æ–º–∫—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —à–≤–∏–¥–∫–æ—Å—Ç—ñ —Ä—É—Ö—É
- Playback rate: `0.8 + (speed / maxSpeed) * 0.4`

---

### Chaser (`src/entities/Chaser.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.Physics.Arcade.Sprite`  
**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å** –¥–ª—è –≤–æ—Ä–æ–≥—ñ–≤

**–¢–∏–ø–∏:**
- `Blocker` (`ChaserBlocker`) - –±–ª–æ–∫—É—î —à–ª—è—Ö, –ø–æ–≤—ñ–ª—å–Ω–æ –∑–∞–ø–æ–≤–Ω—é—î capture
- `Sticker` (`ChaserSticker`) - –±'—î –≥—Ä–∞–≤—Ü—è, —Ä—ñ–∑–∫–æ –∑–∞–ø–æ–≤–Ω—é—î capture

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
```javascript
{
    speed: 120,                 // –®–≤–∏–¥–∫—ñ—Å—Ç—å —Ä—É—Ö—É
    state: 'IDLE',              // IDLE, CHASE, ATTACK
    target: null,               // –¶—ñ–ª—å –ø–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è (Player)
    isFrozen: false,            // –ó–∞–º–æ—Ä–æ–∂–µ–Ω–∏–π?
    frozenTimer: 0,
    navigationSystem: null,     // –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
    soundId: 'running_chaser_X', // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID –¥–ª—è –∑–≤—É–∫—É
    soundPlaybackRate: 0.9-1.1, // –†–∞–Ω–¥–æ–º–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å (–¥–µ—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è)
    audioManager: null
}
```

**–°—Ç–∞–Ω–∏ AI:**
1. **IDLE** - —Å—Ç–æ—ó—Ç—å –Ω–∞ –º—ñ—Å—Ü—ñ
2. **CHASE** - –ø–µ—Ä–µ—Å–ª—ñ–¥—É—î –≥—Ä–∞–≤—Ü—è
   - –í–∏–∫–ª–∏–∫–∞—î `navigationSystem.setTarget(player.x, player.y)`
   - –û–Ω–æ–≤–ª—é—î —à–ª—è—Ö –∫–æ–∂–Ω—ñ 500–º—Å
3. **ATTACK** - –∞—Ç–∞–∫—É—î (–¥–ª—è Sticker)

**–ê–Ω—ñ–º–∞—Ü—ñ—ó:**
–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –≥—Ä–∞–≤—Ü—é, –∞–ª–µ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º `enemy1_` –∞–±–æ `enemy2_`

**–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏:**
```javascript
update(delta, time)             // –û–Ω–æ–≤–ª–µ–Ω–Ω—è AI —Ç–∞ —Ä—É—Ö—É
chase(target)                   // –ü–æ—á–∞—Ç–∏ –ø–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è
stopChasing()                   // –ó—É–ø–∏–Ω–∏—Ç–∏ –ø–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è
setFrozen(duration)             // –ó–∞–º–æ—Ä–æ–∑–∏—Ç–∏ –≤–æ—Ä–æ–≥–∞
updateSounds()                  // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–≤—É–∫—É –±—ñ–≥—É
onHitPlayer()                   // –ö–æ–ª–±–µ–∫ –ø—Ä–∏ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—ñ –∑ –≥—Ä–∞–≤—Ü–µ–º
```

**–ó–≤—É–∫:**
- `running.mp3` - loop –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º playback rate –¥–ª—è –¥–µ—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- –ì—Ä–æ–º–∫—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ –¥–æ –≥—Ä–∞–≤—Ü—è
- –§–æ—Ä–º—É–ª–∞: `maxVol * (1 - dist / maxDist)`

---

### ChaserBlocker (`src/entities/ChaserBlocker.js`)

**–ù–∞—Å–ª—ñ–¥—É—î:** `Chaser`

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ–∫—Å—Ç—É—Ä–∏ `enemy-1` (–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏)
- –ù–ï –±'—î –≥—Ä–∞–≤—Ü—è –Ω–∞–ø—Ä—è–º—É
- –ü–æ–≤—ñ–ª—å–Ω–æ –∑–∞–ø–æ–≤–Ω—é—î capture bar –ø—Ä–∏ –Ω–∞–±–ª–∏–∂–µ–Ω–Ω—ñ
- –ë–ª–æ–∫—É—î —à–ª—è—Ö —Å–≤–æ—ó–º —Ç—ñ–ª–æ–º

**–õ–æ–≥—ñ–∫–∞ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è:**
–û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –≤ `CaptureSystem.update()`:
```javascript
const distance = Phaser.Math.Distance.Between(
    chaser.x, chaser.y, player.x, player.y
);

if (distance < maxDistance && chaser.type === 'Blocker') {
    const fillRate = captureIncreaseRate * 
        ((maxDistance - distance) / maxDistance);
    captureProgress += fillRate * delta / 1000;
}
```

---

### ChaserSticker (`src/entities/ChaserSticker.js`)

**–ù–∞—Å–ª—ñ–¥—É—î:** `Chaser`

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ–∫—Å—Ç—É—Ä–∏ `enemy-2` (–∑ –¥—É–±–∏–Ω–∫–∞–º–∏)
- –ë'—î –≥—Ä–∞–≤—Ü—è —ñ –≤—ñ–¥—Å–∫–∞–∫—É—î
- –†—ñ–∑–∫–æ –∑–∞–ø–æ–≤–Ω—é—î capture bar –ø—Ä–∏ —É–¥–∞—Ä—ñ (+25%)
- –ù–ï –∑–∞–ø–æ–≤–Ω—é—î capture –ø–æ—Å—Ç—É–ø–æ–≤–æ

**–õ–æ–≥—ñ–∫–∞ –∞—Ç–∞–∫–∏:**
```javascript
onHitPlayer() {
    // –î–æ–¥–∞—Ç–∏ burst capture
    this.scene.captureSystem.addCaptureBurst(25);
    
    // –í—ñ–¥—Å–∫–æ—á–∏—Ç–∏ –Ω–∞–∑–∞–¥
    const angle = Phaser.Math.Angle.Between(
        this.target.x, this.target.y, this.x, this.y
    );
    this.setVelocity(
        Math.cos(angle) * 200,
        Math.sin(angle) * 200
    );
    
    // –ó–∞–º–æ—Ä–æ–∑–∏—Ç–∏ –Ω–∞ 1.5—Å
    this.setFrozen(1500);
    
    // –ó–≤—É–∫ —É–¥–∞—Ä—É
    this.scene.audioManager.playSound('fall', false, 0.7);
}
```

**–í–∏—è–≤–ª–µ–Ω–Ω—è –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è:**
–í `GameScene.update()`:
```javascript
this.chasers.forEach(chaser => {
    if (chaser.type === 'Sticker') {
        const dist = Phaser.Math.Distance.Between(
            chaser.x, chaser.y, player.x, player.y
        );
        if (dist < 35 && !chaser.isFrozen) {
            chaser.onHitPlayer();
        }
    }
});
```

---

### Car (`src/entities/Car.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.Physics.Arcade.Sprite`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ú–∞—à–∏–Ω–∞-–ø–µ—Ä–µ—à–∫–æ–¥–∞, —ó–∑–¥–∏—Ç—å –ø–æ –¥–æ—Ä–æ–≥–∞—Ö

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
```javascript
{
    speed: 150-250,             // –†–∞–Ω–¥–æ–º–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å
    carType: 'car_red' / 'car_white',
    engineSound: null,          // Phaser Sound
    engineSoundKey: 'engine_03' / 'engine_07',
    direction: 'horizontal' / 'vertical',
    bounds: {left, right, top, bottom}, // –ú–µ–∂—ñ —Ä—É—Ö—É
    crashed: false              // –ß–∏ –±—É–ª–∞ –∞–≤–∞—Ä—ñ—è
}
```

**–†—É—Ö:**
- –†—É—Ö–∞—î—Ç—å—Å—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ –∞–±–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ
- –†–æ–∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ –º–µ–∂
- –®–≤–∏–¥–∫—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–π–Ω–∞ (–±–µ–∑ –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è/–≥–∞–ª—å–º—É–≤–∞–Ω–Ω—è)

**–ó–≤—É–∫ –¥–≤–∏–≥—É–Ω–∞:**
```javascript
updateEngineSound() {
    const distance = Phaser.Math.Distance.Between(
        this.x, this.y, player.x, player.y
    );
    
    // –ì—Ä–æ–º–∫—ñ—Å—Ç—å –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ
    const volume = Phaser.Math.Clamp(
        maxVol * (1 - distance / maxDistance),
        0, maxVol
    );
    
    // Playback rate –≤—ñ–¥ —à–≤–∏–¥–∫–æ—Å—Ç—ñ
    const rate = this.body.speed < 20 
        ? idleRate 
        : Phaser.Math.FloatBetween(minRate, maxRate);
    
    this.engineSound.setVolume(volume);
    this.engineSound.setRate(rate);
}
```

**–ö–æ–ª—ñ–∑—ñ—ó:**
- –ó –≥—Ä–∞–≤—Ü–µ–º: `player.triggerFall()` + –∑–≤—É–∫ `fall.ogg`
- –ó –≤–æ—Ä–æ–≥–æ–º: `enemy.triggerFall()` + –∑–≤—É–∫ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ
- –ó —ñ–Ω—à–æ—é –º–∞—à–∏–Ω–æ—é: –æ–±–∏–¥–≤—ñ –∑—É–ø–∏–Ω—è—é—Ç—å—Å—è (–∞–≤–∞—Ä—ñ—è)

**–ê–≤–∞—Ä—ñ—è:**
```javascript
handleAccident(otherCar) {
    this.crashed = true;
    this.body.setVelocity(0);
    this.engineSound.stop();
    
    // –ß–µ—Ä–µ–∑ 3—Å –∑–Ω–∏–∫–∞—î
    this.scene.time.delayedCall(3000, () => {
        this.destroy();
    });
}
```

---

### Bonus (`src/entities/Bonus.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.GameObjects.Container`

**–ü—ñ–¥—Ç–∏–ø–∏:**
- `Scooter` - –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –Ω–∞ 2 —Å–µ–∫—É–Ω–¥–∏
- `SmokeCloud` - –∑–∞–º–æ—Ä–æ–∑–∫–∞ –≤—Å—ñ—Ö –≤–æ—Ä–æ–≥—ñ–≤ –Ω–∞ 1.5 —Å–µ–∫—É–Ω–¥–∏

**–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**
```javascript
{
    bonusType: 'SCOOTER' / 'SMOKE_CLOUD',
    magnetRadius: 60,           // –†–∞–¥—ñ—É—Å –ø—Ä–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è
    magnetSpeed: 300,           // –®–≤–∏–¥–∫—ñ—Å—Ç—å –ø—Ä–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è
    visual: Image/Rectangle     // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
}
```

**–ú–∞–≥–Ω—ñ—Ç–Ω–∏–π –µ—Ñ–µ–∫—Ç:**
```javascript
update(player) {
    const distance = Phaser.Math.Distance.Between(
        this.x, this.y, player.x, player.y
    );
    
    if (distance < this.magnetRadius) {
        // –†—É—Ö –¥–æ –≥—Ä–∞–≤—Ü—è
        const angle = Phaser.Math.Angle.Between(
            this.x, this.y, player.x, player.y
        );
        this.x += Math.cos(angle) * this.magnetSpeed * delta / 1000;
        this.y += Math.sin(angle) * this.magnetSpeed * delta / 1000;
    }
}
```

**–ü—ñ–¥–±—ñ—Ä:**
```javascript
collect() {
    this.applyEffect(player, scene);
    this.scene.audioManager.playSound('pickup', false, 0.6);
    this.destroy();
}
```

---

### Scooter (`src/entities/bonuses/Scooter.js`)

**–ï—Ñ–µ–∫—Ç:**
```javascript
applyEffect(player, scene) {
    const duration = GAME_CONFIG.PICKUPS.SCOOTER.DURATION; // 2000–º—Å
    const speedBoost = GAME_CONFIG.PICKUPS.SCOOTER.SPEED_BOOST; // +150
    
    player.speed += speedBoost;
    player.dashSpeed += speedBoost;
    
    scene.time.delayedCall(duration, () => {
        player.speed -= speedBoost;
        player.dashSpeed -= speedBoost;
    });
}
```

**–ö–æ–Ω—Ñ—ñ–≥:**
```javascript
SCOOTER: {
    DURATION: 2000,
    SPEED_BOOST: 150,
    MIN_COUNT_ON_MAP: 1,
    MAX_COUNT_ON_MAP: 4,
    MIN_DISTANCE_BETWEEN: 1000,
    WIDTH: 80,
    HEIGHT: 100
}
```

---

### SmokeCloud (`src/entities/bonuses/SmokeCloud.js`)

**–ï—Ñ–µ–∫—Ç:**
```javascript
applyEffect(player, scene) {
    const duration = GAME_CONFIG.PICKUPS.SMOKE_CLOUD.DURATION; // 1500–º—Å
    
    // –ó–∞–º–æ—Ä–æ–∑–∏—Ç–∏ –≤—Å—ñ—Ö –≤–æ—Ä–æ–≥—ñ–≤
    scene.chasers.forEach(chaser => {
        if (!chaser.isFrozen) {
            chaser.setFrozen(duration);
        }
    });
    
    // –í—ñ–∑—É–∞–ª—å–Ω–∏–π –µ—Ñ–µ–∫—Ç (–∞–Ω—ñ–º–∞—Ü—ñ—è –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è)
    this.playDisappearAnimation();
}
```

**–†–µ—Å–ø–∞–≤–Ω:**
- –ó–∞—Ç—Ä–∏–º–∫–∞: 20 —Å–µ–∫—É–Ω–¥ –ø—ñ—Å–ª—è –ø—ñ–¥–±–æ—Ä—É
- –ú–∞–∫—Å–∏–º—É–º –Ω–∞ –∫–∞—Ä—Ç—ñ: 2-3 —à—Ç
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –º—ñ–∂ —Ö–º–∞—Ä–∫–∞–º–∏: 1500px

---

### Coin (`src/entities/Coin.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.GameObjects.Rectangle`

**–ù–æ–º—ñ–Ω–∞–ª–∏:**
- 10‚Ç¥ (–∑–µ–ª–µ–Ω–∏–π)
- 20‚Ç¥ (–∂–æ–≤—Ç–∏–π)
- 50‚Ç¥ (–ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π)
- 100‚Ç¥ (—á–µ—Ä–≤–æ–Ω–∏–π)

**Spawn:**
- –í–∏–ø–∞–¥–∫–æ–≤–∞ –ø–æ–∑–∏—Ü—ñ—è –Ω–∞ walkable —Ç–∞–π–ª–∞—Ö
- –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –ø–æ—Å—Ç—ñ–π–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ –∫–∞—Ä—Ç—ñ (20-30 —à—Ç)

**–ú–∞–≥–Ω—ñ—Ç–Ω–∏–π –µ—Ñ–µ–∫—Ç:** –¢–∞–∫ (—Ä–∞–¥—ñ—É—Å 60px)

---

### Exchange (`src/entities/Exchange.js`)

**–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å:** `Phaser.GameObjects.Image`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –û–±–º—ñ–Ω–Ω–∏–∫ –≤–∞–ª—é—Ç–∏ (–≥—Ä–∏–≤–Ω—ñ ‚Üí –¥–æ–ª–∞—Ä–∏)

**–ö—É—Ä—Å –æ–±–º—ñ–Ω—É:** 43‚Ç¥ = 1$ (–∑ –∫–æ–Ω—Ñ—ñ–≥—É)

**–ö–æ–ª—ñ–∑—ñ—è –∑ –≥—Ä–∞–≤—Ü–µ–º:**
```javascript
// –í GameScene.handleExchangeCollision():
const uah = this.currentMoney;
const rate = GAME_CONFIG.EXCHANGES.EXCHANGE_RATE;
const usd = Math.floor(uah / rate);

if (usd > 0) {
    this.currentBankedMoney += usd;
    this.moneyAddedThisGame += usd;
    this.currentMoney = uah % rate; // –ó–∞–ª–∏—à–æ–∫
    
    player.freeze(duration, 'exchange_sound');
}
```

**–ó–∞–º–æ—Ä–æ–∑–∫–∞:** 2 —Å–µ–∫—É–Ω–¥–∏ + –∑–≤—É–∫ `exchange.mp3` (loop)

**–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ –∫–∞—Ä—Ç—ñ:** 3 —à—Ç

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ì—Ä–∏

–í–µ—Å—å —Ñ–∞–π–ª: `src/config/gameConfig.js`

### –û—Å–Ω–æ–≤–Ω—ñ —Ä–æ–∑–¥—ñ–ª–∏:

```javascript
export const GAME_CONFIG = {
    VERSION: 'beta v0.2.1',
    
    KIOSKS: { /* –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫—ñ–æ—Å–∫—ñ–≤ */ },
    EXCHANGES: { /* –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–±–º—ñ–Ω–Ω–∏–∫—ñ–≤ */ },
    
    PLAYER: {
        SPEED: 200,
        DASH_SPEED: 400,
        STAMINA: 100,
        STAMINA_DRAIN_RATE: 20,
        STAMINA_REGEN_RATE: 10,
        DASH_COOLDOWN: 500,
        SLIDE_DURATION: 800,
        FALL_DURATION: 2000,
        COLLISION_DAMAGE: 0,
        SOUND_PLAYBACK_RATE_MIN: 0.8,
        SOUND_PLAYBACK_RATE_MAX: 1.2
    },
    
    CHASER: {
        SPAWN_COUNT: 6,          // 3 Blocker + 3 Sticker
        SPEED: 120,
        CHASE_RANGE: 600,
        ATTACK_RANGE: 35,        // –î–ª—è Sticker
        SPAWN_INTERVAL: 10000,
        MAX_CHASERS: 15,
        FREEZE_DURATION: 1500,   // –í—ñ–¥ SmokeCloud
        SOUND_VOLUME_MAX: 0.5,
        SOUND_MAX_DISTANCE: 400,
        SOUND_PLAYBACK_RATE_MIN: 0.9,
        SOUND_PLAYBACK_RATE_MAX: 1.1
    },
    
    CAPTURE: {
        MAX_CAPTURE: 100,
        INCREASE_RATE: 0.5,      // –ó–∞ —Å–µ–∫—É–Ω–¥—É (Blocker)
        DECAY_RATE: 2,           // –°–ø–∞–¥ –∑–∞ —Å–µ–∫—É–Ω–¥—É
        MAX_DISTANCE: 200,       // –ú–∞–∫—Å. –¥–∏—Å—Ç–∞–Ω—Ü—ñ—è –¥–ª—è Blocker
        STICKER_BURST: 25        // Burst –¥–ª—è Sticker
    },
    
    PICKUPS: {
        COIN: {
            MIN_COUNT: 20,
            MAX_COUNT: 30,
            SPAWN_INTERVAL: 2000,
            VALUES: [10, 20, 50, 100]
        },
        SCOOTER: { /* ... */ },
        SMOKE_CLOUD: { /* ... */ }
    },
    
    OBSTACLES: {
        CARS: {
            COUNT: 8,
            MIN_SPEED: 150,
            MAX_SPEED: 250
        },
        TAPE_GATES: {
            COUNT: 12,
            HEIGHT: 40
        },
        PUDDLES: {
            COUNT: 15,
            SLIP_DURATION: 1000
        }
    },
    
    AUDIO: {
        MUSIC: {
            VOLUME: 0.5,
            ENABLED: true,
            CROSSFADE_DURATION: 2000
        },
        SOUNDS: {
            VOLUME: 0.7,
            ENABLED: true
        },
        POLICE_SIREN: {
            MIN_INTERVAL: 30000,
            MAX_INTERVAL: 60000,
            VOLUME: 0.6
        },
        CAR_ENGINE: { /* ... */ },
        AMBIENCE: { /* ... */ }
    }
};
```

---

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### HUD (`src/ui/HUD.js`)

**–í—ñ–¥–æ–±—Ä–∞–∂–∞—î:**
- –ì—Ä–æ—à—ñ (–≥—Ä–∏–≤–Ω—ñ) –∑–≤–µ—Ä—Ö—É –ª—ñ–≤–æ—Ä—É—á
- –ë–∞–Ω–∫ (–¥–æ–ª–∞—Ä–∏) –∑–≤–µ—Ä—Ö—É –ø—Ä–∞–≤–æ—Ä—É—á
- –°—Ç–∞–º—ñ–Ω–∞ (–ø—Ä–æ–≥—Ä–µ—Å –±–∞—Ä) –∑–Ω–∏–∑—É –ø–æ —Ü–µ–Ω—Ç—Ä—É
- Capture Bar (—á–µ—Ä–≤–æ–Ω–∞ —à–∫–∞–ª–∞) –∑–Ω–∏–∑—É –ø–æ—Å–µ—Ä–µ–¥–∏–Ω—ñ

**–û–Ω–æ–≤–ª–µ–Ω–Ω—è:**
```javascript
update() {
    this.moneyText.setText(`üí∞ ${this.scene.currentMoney}‚Ç¥`);
    this.bankText.setText(`üè¶ ${this.scene.currentBankedMoney}$`);
    
    const staminaPercent = this.scene.player.stamina / maxStamina;
    this.staminaBar.width = maxWidth * staminaPercent;
    
    const capturePercent = this.scene.captureSystem.getCapturePercentage();
    this.captureBar.width = maxWidth * (capturePercent / 100);
}
```

---

### Minimap (`src/ui/Minimap.js`)

**–í—ñ–¥–æ–±—Ä–∞–∂–∞—î:**
- –ú—ñ–Ω—ñ–∫–∞—Ä—Ç–∞ (–∑–≤–µ—Ä—Ö—É –ø—Ä–∞–≤–æ—Ä—É—á)
- –ü–æ–∑–∏—Ü—ñ—è –≥—Ä–∞–≤—Ü—è (—Å–∏–Ω—è –∫—Ä–∞–ø–∫–∞)
- –ü–æ–∑–∏—Ü—ñ—ó –≤–æ—Ä–æ–≥—ñ–≤ (—á–µ—Ä–≤–æ–Ω—ñ –∫—Ä–∞–ø–∫–∏)
- –ü–æ–∑–∏—Ü—ñ—ó –æ–±–º—ñ–Ω–Ω–∏–∫—ñ–≤ (–∂–æ–≤—Ç—ñ –∫—Ä–∞–ø–∫–∏)

**–ú–∞—Å—à—Ç–∞–±:** –ö–∞—Ä—Ç–∞ 4092√ó4092 ‚Üí –ú—ñ–Ω—ñ–∫–∞—Ä—Ç–∞ 200√ó200

---

## üîä –ê—É–¥—ñ–æ –°–∏—Å—Ç–µ–º–∞

### –ú—É–∑–∏–∫–∞

**–¢—Ä–µ–∫–∏:**
1. `back_1.mp3` - `back_8.mp3` (8 —Ç—Ä–µ–∫—ñ–≤)
2. `gameover.mp3` (—Ç—ñ–ª—å–∫–∏ –≤ ResultScene)

**–í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è:**
- –í–∏–ø–∞–¥–∫–æ–≤–∏–π –ø–æ—Ä—è–¥–æ–∫ (shuffle)
- Crossfade –º—ñ–∂ —Ç—Ä–µ–∫–∞–º–∏ (2 —Å–µ–∫—É–Ω–¥–∏)
- Loop playlist

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- –ì—É—á–Ω—ñ—Å—Ç—å: 0-1 (—Å–ª–∞–π–¥–µ—Ä –≤ –º–µ–Ω—é)
- –£–≤—ñ–º–∫–Ω–µ–Ω–æ/–í–∏–º–∫–Ω–µ–Ω–æ (checkbox)
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ localStorage

---

### –ó–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏

**–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:**

1. **–†—É—Ö:**
   - `running.mp3` - –±—ñ–≥ –≥—Ä–∞–≤—Ü—è/–≤–æ—Ä–æ–≥—ñ–≤ (loop)
   - `engine_01.wav` - `engine_13.wav` - –¥–≤–∏–≥—É–Ω–∏ –º–∞—à–∏–Ω (loop)

2. **–î—ñ—ó:**
   - `money.wav` - –ø—ñ–¥–±—ñ—Ä –≥—Ä–æ—à–µ–π
   - `pickup.mp3` - –ø—ñ–¥–±—ñ—Ä –±–æ–Ω—É—Å—ñ–≤
   - `drink.wav` - –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–º—ñ–Ω–∏ (loop –ø—Ä–∏ —Ñ—Ä—ñ–∑—ñ)
   - `exchange.mp3` - –æ–±–º—ñ–Ω –≤–∞–ª—é—Ç–∏ (loop –ø—Ä–∏ —Ñ—Ä—ñ–∑—ñ)
   - `fall.ogg` - –ø–∞–¥—ñ–Ω–Ω—è –≤—ñ–¥ –º–∞—à–∏–Ω–∏
   - `stop_uhilant.mp3` - —Å–∏—Ä–µ–Ω–∞ (—Ä–∞–Ω–¥–æ–º–Ω–æ)

3. **–ú–µ–Ω—é:**
   - `menu_hover.wav` - –Ω–∞–≤–µ–¥–µ–Ω–Ω—è –Ω–∞ –∫–Ω–æ–ø–∫—É
   - `menu_choise.wav` - –∫–ª—ñ–∫ –ø–æ –∫–Ω–æ–ø—Ü—ñ

4. **Ambient:**
   - `birds.wav` - –ø—Ç–∞—à–∫–∏ (loop)
   - `wind.wav` - –≤—ñ—Ç–µ—Ä (loop)
   - `river.wav` - —Ä—ñ—á–∫–∞ (loop, —Ç—ñ–ª—å–∫–∏ –±—ñ–ª—è –≤–æ–¥–∏)

---

## üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –î–∞–Ω–∏—Ö

**–õ–æ–∫–∞—Ü—ñ—è:** `localStorage`

**–ö–ª—é—á—ñ:**
- `gameData` - –ø—Ä–æ–≥—Ä–µ—Å –≥—Ä–∞–≤—Ü—è
- `audioSettings` - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞—É–¥—ñ–æ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ gameData:**
```json
{
    "bankedMoney": 150,
    "totalMoneyCollected": 2500,
    "totalPlayTime": 1800000,
    "gamesPlayed": 12,
    "bestSurvivalTime": 180000,
    "lastPlayed": 1704067200000
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ audioSettings:**
```json
{
    "musicVolume": 0.5,
    "musicEnabled": true,
    "soundsVolume": 0.7,
    "soundsEnabled": true
}
```

---

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

1. **–ù–∞–≤—ñ–≥–∞—Ü—ñ—è AI:**
   - –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ —à–ª—è—Ö—É –Ω–µ —á–∞—Å—Ç—ñ—à–µ 500–º—Å
   - –ü—Ä–æ—Å—Ç–∏–π pathfinding (–±–µ–∑ —Å–∫–ª–∞–¥–Ω–æ–≥–æ A*)

2. **–ó–≤—É–∫–∏:**
   - –ì—Ä–æ–º–∫—ñ—Å—Ç—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤—ñ–¥—Å—Ç–∞–Ω—ñ (–Ω–µ –≥—Ä–∞—î —è–∫—â–æ –¥–∞–ª–µ–∫–æ)
   - Unique sound keys –¥–ª—è –±–∞–≥–∞—Ç–æ—Ä–∞–∑–æ–≤–æ–≥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è
   - Pause/resume –∑–∞–º—ñ—Å—Ç—å stop/play

3. **Spawn:**
   - Lazy spawn (–Ω–µ –≤—Å–µ –æ–¥—Ä–∞–∑—É)
   - Maintain counts (–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ)
   - Cleanup destroyed objects

4. **Collision Detection:**
   - Pixel-based –¥–ª—è –∫–∞—Ä—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–∞–ø–∏—Ç—ñ)
   - Physics overlap –¥–ª—è –æ–±'—î–∫—Ç—ñ–≤
   - Manual distance check –¥–ª—è Sticker

### –í—ñ–¥–æ–º—ñ –û–±–º–µ–∂–µ–Ω–Ω—è

1. **Pathfinding:**
   - –ü—Ä–æ—Å—Ç–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º, –º–æ–∂–µ –∑–∞—Å—Ç—Ä—è–≥–∞—Ç–∏
   - –ù–µ –≤—Ä–∞—Ö–æ–≤—É—î –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –ø–µ—Ä–µ—à–∫–æ–¥–∏

2. **Tilemap:**
   - Collision —á–µ—Ä–µ–∑ pixel colors (–Ω–µ —Ç–∞–π–ª–∏)
   - –í–∏–º–∞–≥–∞—î —Ç–æ—á–Ω—É –∫–æ–ª—å–æ—Ä–æ–≤—É —Å—Ö–µ–º—É

3. **Multiplayer:**
   - –ù–µ–º–∞—î (single-player only)

4. **Mobile:**
   - –ù–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è (—Ç—ñ–ª—å–∫–∏ desktop)
   - –ï–∫—Ä–∞–Ω –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö

---

## üìù –í–∏—Å–Ω–æ–≤–æ–∫

–¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ–∫—Ä–∏–≤–∞—î –≤—Å—é –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≥—Ä–∏ "–í—Ç–µ—á–∞ –≤—ñ–¥ –¢–¶–ö". 

**–î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ —è–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö features.

**–î–ª—è –®–Ü:** –í—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É, –ª–æ–≥—ñ–∫–∞ —Ç–∞ –∑–≤'—è–∑–∫–∏ –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –æ–ø–∏—Å–∞–Ω—ñ –¥–µ—Ç–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–¥—É.

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Ç–∞ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ –∫–æ–¥–æ–≤–æ—é –±–∞–∑–æ—é.*
