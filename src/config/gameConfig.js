// Конфігурація гри
export const GAME_CONFIG = {
    // Кіоски
    KIOSKS: {
        COUNT: 5,                    // Кількість кіосків на карті
        FREEZE_DURATION: 2000,       // Тривалість заморозки при зіткненні (мс)
        RESPAWN_DELAY: 20000,        // Затримка перед респавном (мс)
        DISAPPEAR_BEFORE_FREEZE_END: 100, // На скільки раніше зникає кіоск (мс)
        COOLDOWN: 3000               // Затримка перед повторною заморозкою (мс)
    },
    
    // Обмінники
    EXCHANGES: {
        COUNT: 3,                    // Кількість обмінників на карті
        EXCHANGE_RATE: 43,           // Курс обміну: 1 долар = 43 гривні
        FREEZE_DURATION: 2000,       // Тривалість заморозки при обміні (мс)
        COOLDOWN: 1000               // Затримка перед повторним обміном (мс)
    },
    
    // Гравець
    PLAYER: {
        BASE_SPEED: 220,                    // Базова швидкість руху (пікселі/сек)
        STAMINA_MAX: 100,                    // Максимальна стаміна (0-100)
        STAMINA_DRAIN_PER_SEC: 6,            // Витрата стаміни при русі (одиниць/секунду)
        STAMINA_REGEN_PER_SEC: 4,            // Відновлення стаміни при стоянні (одиниць/секунду)
        STAMINA_REGEN_MULTIPLIER: 1.2,       // Множник швидкості відновлення при повній зупинці (x1.2)
        EXHAUSTED_SLOW_DURATION: 2000,       // Тривалість повільного руху після виснаження (мс)
        EXHAUSTED_SPEED_MULTIPLIER: 0.75,    // Множник швидкості в стані виснаження (75% від базової)
        DASH_DURATION: 350,                  // Тривалість dash (мс)
        DASH_SPEED_MULTIPLIER: 1.7,          // Множник швидкості під час dash (170% від базової)
        DASH_COOLDOWN: 4000,                 // Cooldown dash (мс)
        DASH_STAMINA_COST: 20,               // Витрата стаміни за один dash (одиниць)
        SLIDE_DURATION: 450,                 // Тривалість slide (мс)
        SLIDE_COOLDOWN: 2000,                // Cooldown slide (мс)
        SLIDE_SPEED_MULTIPLIER: 1.1          // Множник швидкості під час slide (110% від базової)
    },
    
    // Світ
    WORLD: {
        WIDTH: 4000,
        HEIGHT: 4000,
        TILE_SIZE: 32
    },
    
    // Система захоплення (Capture)
    CAPTURE: {
        MAX: 100,                           // Максимальне значення capture (0-100)
        CLOSE_DISTANCE: 70,                 // Відстань до ворога, при якій capture росте (пікселі)
        VERY_CLOSE_DISTANCE: 35,            // Відстань до ворога, при якій capture росте дуже швидко (пікселі)
        SAFE_DISTANCE: 120,                 // Відстань до ворога, при якій capture спадає (пікселі)
        GROWTH_RATE_CLOSE: 5,              // Швидкість зростання capture коли ворог близько (одиниць/секунду)
        GROWTH_RATE_VERY_CLOSE: 15,         // Швидкість зростання capture коли ворог дуже близько (одиниць/секунду)
        DECAY_RATE: 25                      // Швидкість спаду capture коли ворог далеко (одиниць/секунду)
    },
    
    // Перешкоди
    OBSTACLES: {
        PUDDLE_SLIP: {
            WIDTH: 50,
            HEIGHT: 50,
            COLOR: 0x4169e1, // Блакитний колір для калюжі
            CONTROL_MULTIPLIER: 0.6, // Множник керованості (60% від нормальної)
            DEBUFF_DURATION: 700, // Тривалість дебафу (мс)
            COOLDOWN: 500, // Затримка перед повторним застосуванням (мс)
            MIN_COUNT: 5, // Мінімальна кількість калюж
            MAX_COUNT: 15, // Максимальна кількість калюж
            RESPAWN_INTERVAL: 30000, // Інтервал оновлення калюж (30 секунд, мс)
            SIZE_OPTIONS: [1, 2, 4] // Можливі розміри калюж в тайлах
        },
        TAPE_GATE: {
            WIDTH: 60,
            HEIGHT: 20,
            COLOR: 0xffa500, // Помаранчевий колір для стрічки
            BLOCK_SPEED: 0 // Швидкість блокування (0 = повна зупинка)
        },
        MOVING_BUS: {
            WIDTH: 65, // Ширина авто (пікселі) - використовується як fallback
            HEIGHT: 35, // Висота авто (пікселі) - використовується як fallback
            DISPLAY_WIDTH: 35, // Ширина для відображення (null = використовувати оригінальний розмір текстури)
            DISPLAY_HEIGHT: 65, // Висота для відображення (null = використовувати оригінальний розмір текстури)
            COLOR: 0x8b4513, // Коричневий колір для автомобіля
            SPEED: 160, // Швидкість руху автомобіля (пікселі/сек)
            MIN_COUNT: 20, // Мінімальна кількість авто на карті
            MAX_COUNT: 25, // Максимальна кількість авто на карті
            FREEZE_DURATION_MIN: 1000, // Мінімальна тривалість заморозки при зіткненні (мс)
            FREEZE_DURATION_MAX: 2000, // Максимальна тривалість заморозки при зіткненні (мс)
            PUSH_DISTANCE_MIN: 96, // Мінімальна відстань відкидання (пікселі, 3 тайли)
            PUSH_DISTANCE_MAX: 128, // Максимальна відстань відкидання (пікселі, 4 тайли)
            // Колізії між авто
            COLLISION_RADIUS: 25, // Радіус колізії авто (пікселі) - відстань на якій авто вважаються що зіштовхнулись
            MIN_DISTANCE_BETWEEN_CARS: 80, // Мінімальна відстань між авто (пікселі) - авто намагаються триматися на цій відстані
            KEEP_RIGHT_DISTANCE: 64, // Відстань від правого краю дороги (пікселі, ~2 тайли) - авто тримаються на цій відстані від краю
            KEEP_RIGHT_STRENGTH: 0.15, // Сила корекції для тримання правої сторони (0-1, де 0 = вимкнено, 1 = максимальна)
            ACCIDENT_DURATION_MIN: 1000, // Мінімальна тривалість ДТП (мс)
            ACCIDENT_DURATION_MAX: 2000, // Максимальна тривалість ДТП (мс)
            ACCIDENT_COOLDOWN: 3000, // Cooldown після ДТП перед можливістю нового (мс)
            CAR_TEXTURES: ['car_red', 'car_white'], // Список доступних текстур авто (додавайте нові текстури сюди)
            // ОРІЄНТАЦІЯ ТЕКСТУРИ:
            // CAR_ROTATION_OFFSETS - об'єкт, що містить базовий кут обертання для кожної текстури (в радіанах)
            // Якщо текстура має перед вправо (за замовчуванням Phaser) = 0
            // Якщо текстура має перед вгору = Math.PI / 2 (90°)
            // Якщо текстура має перед вниз = -Math.PI / 2 (-90°)
            // Якщо текстура має перед вліво = Math.PI (180°)
            CAR_ROTATION_OFFSETS: {
                'car_red': Math.PI / 2, // Перед вгору (якщо текстура має перед вправо, додаємо 90°)
                'car_white': Math.PI / 2 // Перед вгору
            },
            // Мапінг текстур авто до звуків двигунів
            CAR_ENGINE_SOUNDS: {
                'car_red': 'engine_03',
                'car_white': 'engine_07'
            },
            // Список всіх доступних звуків двигунів (для рандомного вибору якщо текстура не знайдена)
            ENGINE_SOUND_POOL: ['engine_01', 'engine_03', 'engine_05', 'engine_07', 'engine_09', 'engine_11', 'engine_13']
        },
        PAPER_STACK: {
            WIDTH: 30,
            HEIGHT: 30,
            COLOR: 0xf5f5f5, // Світло-сірий колір для пачки паперів
            STAGGER_DURATION: 200, // Тривалість стагеру (мс)
            STAGGER_SPEED_MULTIPLIER: 0.3, // Множник швидкості під час стагеру (30%)
            COINS_MIN: 3, // Мінімальна кількість монет
            COINS_MAX: 6, // Максимальна кількість монет
            COIN_SPAWN_RADIUS: 40, // Радіус спавну монет (пікселі)
            COOLDOWN: 1000 // Затримка перед повторним спрацюванням (мс)
        }
    },
    
    // Переслідувачі (вороги)
    CHASERS: {
        // Загальні параметри для всіх ворогів
        COMMON: {
            RADIUS: 12,                    // Радіус спрайта ворога (пікселі)
            DRAG: 400,                     // Сила гальмування (для плавності руху)
            DEPTH: 5,                      // Глибина відображення (вище тайлів, нижче гравця)
            COLOR_BLOCKER: 0xe74c3c,       // Колір Blocker (червоний)
            COLOR_STICKER: 0x9b59b6,       // Колір Sticker (фіолетовий)
            COLLISION_RADIUS: 12           // Радіус для перевірки колізій з тайлами
        },
        
        // Blocker - перекривач, обганяє і стає попереду
        BLOCKER: {
            SPEED: 160,                    // Базова швидкість руху (190-210 згідно MVP, пікселі/сек)
            DISPLAY_SIZE: 70,              // Розмір спрайта на екрані (пікселі)
            BODY_SIZE: 65,                 // Розмір тіла для колізій (пікселі, якщо null - використовується DISPLAY_SIZE)
            LEAD_DISTANCE: 150,            // Відстань для прогнозування позиції гравця (120-180 пікселів)
            TOO_CLOSE_DISTANCE: 50,        // Мінімальна відстань до гравця, при якій відходимо убік (пікселі)
            BACK_OFF_SPEED_MULTIPLIER: 0.7, // Множник швидкості при відході убік (70% від базової)
            PLAYER_STANDING_THRESHOLD: 10  // Швидкість гравця, нижче якої вважається що він стоїть (пікселі/сек)
        },
        
        // Sticker - прилипала, наздоганяє і робить удар
        STICKER: {
            SPEED: 170,                    // Базова швидкість руху (230-255 згідно MVP, пікселі/сек)
            DISPLAY_SIZE: 70,              // Розмір спрайта на екрані (пікселі)
            BODY_SIZE: 65,                 // Розмір тіла для колізій (пікселі, якщо null - використовується DISPLAY_SIZE)
            HIT_COOLDOWN: 1500,            // Cooldown після удару по гравцю (1.5 секунди, мс)
            HIT_BACKOFF_DISTANCE: 30,      // Відстань відскоку назад після удару (пікселі)
            CAPTURE_DAMAGE: 25,            // Capture що додається при ударі по гравцю (0-100)
            RETREAT_SPEED_MULTIPLIER: 0.5  // Множник швидкості при відході під час cooldown (50% від базової)
        },
        
        // Параметри спавну ворогів
        SPAWN: {
            INITIAL_COUNT: 6,              // Початкова кількість ворогів (1 Blocker + 1 Sticker)
            MIN_DISTANCE_FROM_PLAYER: 300, // Мінімальна відстань від гравця при спавні (пікселі)
            MAX_DISTANCE_FROM_PLAYER: 500, // Максимальна відстань від гравця при спавні (пікселі)
            MIN_DISTANCE_BETWEEN: 150,     // Мінімальна відстань між ворогами при спавні (пікселі)
            MAX_SPAWN_ATTEMPTS: 50         // Максимальна кількість спроб знайти валідну позицію для спавну
        }
    },
    
    // Пікапи та бонуси
    PICKUPS: {
        // Монети
        COINS: {
            MAX_COUNT_ON_MAP: 15,          // Максимальна кількість монет на всій карті
            // Номінали монет зі співвідношеннями спавну та текстурами
            // Формат: "один на N" - одна монета цього номіналу на кожні N монет
            // 10 грн спавниться завжди, але замінюється на інші згідно співвідношення
            DENOMINATIONS: [
                { value: 10, ratio: 1, color: 0xffd700, texture: 'coin_10' },      // 10 грн - завжди (базовий)
                { value: 20, ratio: 10, color: 0xffa500, texture: 'coin_20' },     // 20 грн - одна на кожні 10 монет
                { value: 50, ratio: 20, color: 0xff6347, texture: 'coin_50' },    // 50 грн - одна на кожні 20 монет
                { value: 100, ratio: 50, color: 0xff1493, texture: 'coin_100' }   // 100 грн - одна на кожні 50 монет
            ]
        },
        // Скутер
        SCOOTER: {
            SPEED_MULTIPLIER: 0.5,         // Додатковий множник швидкості (+50%)
            DURATION: 2000,                 // Тривалість ефекту (мс)
            WIDTH: 80,                      // Ширина пікапа (пікселі)
            HEIGHT: 100,                    // Висота пікапа (пікселі)
            MIN_COUNT_ON_MAP: 1,           // Мінімальна кількість скутерів на карті
            MAX_COUNT_ON_MAP: 4,           // Максимальна кількість скутерів на карті
            MIN_DISTANCE_BETWEEN: 1000      // Мінімальна відстань між бонусами (пікселі)
        },
        // Димова хмарка
        SMOKE_CLOUD: {
            DURATION: 1500,                 // Тривалість заморозки ворогів (мс)
            ANIMATION_DURATION: 500,        // Тривалість анімації хмарки (мс)
            MIN_COUNT_ON_MAP: 1,           // Мінімальна кількість хмарок на карті
            MAX_COUNT_ON_MAP: 4,           // Максимальна кількість хмарок на карті
            MIN_DISTANCE_BETWEEN: 600      // Мінімальна відстань між бонусами (пікселі)
        }
    },
    
    // Аудіо налаштування
    AUDIO: {
        MUSIC: {
            DEFAULT_VOLUME: 0.5,            // Початкова гучність музики (0.0 - 1.0)
            CROSSFADE_DURATION: 2000,       // Тривалість плавного переходу між треками (мс)
            ENABLED_BY_DEFAULT: true        // Чи увімкнена музика за замовчуванням
        },
        SOUNDS: {
            DEFAULT_VOLUME: 0.7,            // Початкова гучність звукових ефектів (0.0 - 1.0)
            ENABLED_BY_DEFAULT: true        // Чи увімкнені звуки за замовчуванням
        },
        ENEMY_SOUNDS: {
            MAX_DISTANCE: 400,              // Максимальна відстань на якій чутно ворога (пікселі)
            MIN_DISTANCE: 50,               // Мінімальна відстань (повна гучність) (пікселі)
            MAX_VOLUME: 0.4,                // Максимальна гучність звуку ворога (0.0 - 1.0)
            MIN_VOLUME: 0.0                 // Мінімальна гучність (на максимальній відстані)
        },
        POLICE_SIREN: {
            MIN_INTERVAL: 30000,            // Мінімальний інтервал між відтвореннями (мс) - 30 секунд
            MAX_INTERVAL: 60000,            // Максимальний інтервал між відтвореннями (мс) - 1 хвилина
            ENEMY_CHECK_RADIUS: 500,        // Радіус перевірки ворогів поблизу гравця (пікселі)
            MIN_ENEMIES_NEARBY: 1,          // Мінімальна кількість ворогів поблизу для відтворення
            VOLUME: 0.6                     // Гучність сирени (0.0 - 1.0)
        },
        CAR_ENGINE: {
            MAX_DISTANCE: 600,              // Максимальна відстань на якій чутно двигун (пікселі)
            MIN_DISTANCE: 100,              // Мінімальна відстань (повна гучність) (пікселі)
            MAX_VOLUME: 0.3,                // Максимальна гучність двигуна (0.0 - 1.0)
            MIN_VOLUME: 0.0,                // Мінімальна гучність (на максимальній відстані)
            IDLE_PLAYBACK_RATE: 0.7,        // Швидкість відтворення коли авто стоїть
            MOVING_PLAYBACK_RATE_MIN: 1.0,  // Мінімальна швидкість відтворення коли авто їде
            MOVING_PLAYBACK_RATE_MAX: 1.15, // Максимальна швидкість відтворення коли авто їде швидко
            SPEED_THRESHOLD: 20             // Поріг швидкості для визначення руху (пікселі/сек)
        },
        FALL_SOUND: {
            PLAYER_VOLUME: 0.7,             // Гучність падіння гравця (0.0 - 1.0)
            ENEMY_MAX_VOLUME: 0.5,          // Максимальна гучність падіння ворога (0.0 - 1.0)
            ENEMY_MAX_DISTANCE: 600,        // Максимальна відстань на якій чутно падіння ворога (пікселі)
            ENEMY_MIN_DISTANCE: 100         // Мінімальна відстань (повна гучність) (пікселі)
        }
    }
};
