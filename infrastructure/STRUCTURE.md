# PosSystem Infrastructure

–Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—ñ–≤ –Ω–∞ Hetzner Cloud.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
possystem-infra/
‚îú‚îÄ‚îÄ ansible-playbooks/        # Ansible –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è –ø—Ä–æ–≤—ñ–∑—ñ–æ–Ω—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ inventory/            # –Ü–Ω–≤–µ–Ω—Ç–∞—Ä—ñ —Ö–æ—Å—Ç—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ production/       # –ü—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ group_vars/   # –ó–º—ñ–Ω–Ω—ñ –≥—Ä—É–ø–∏ —Ö–æ—Å—Ç—ñ–≤
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ all.yml   # –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö —Ö–æ—Å—Ç—ñ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ web           # –Ü–Ω–≤–µ–Ω—Ç–∞—Ä –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤ (IP, SSH –∫–ª—é—á)
‚îÇ   ‚îú‚îÄ‚îÄ roles/                # Ansible —Ä–æ–ª—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/           # –ë–∞–∑–æ–≤—ñ –ø–∞–∫–µ—Ç–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deploy/           # –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π –¥–ª—è –¥–µ–ø–ª–æ—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mysql/            # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è MySQL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx/            # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Nginx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nodejs/           # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js —á–µ—Ä–µ–∑ NodeSource
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ php/              # PHP 8.2 FPM –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º–∏ + Composer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis/            # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Redis
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security/         # Fail2Ban + –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è SSH
‚îÇ   ‚îú‚îÄ‚îÄ hetzner_key           # –ü—Ä–∏–≤–∞—Ç–Ω–∏–π SSH –∫–ª—é—á –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ web.yml               # –ì–æ–ª–æ–≤–Ω–∏–π playbook –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤
‚îÇ
‚îî‚îÄ‚îÄ terraform/                # Terraform –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è IaC
    ‚îú‚îÄ‚îÄ hetzner/              # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ Hetzner
    ‚îÇ   ‚îú‚îÄ‚îÄ network/          # –ú–µ—Ä–µ–∂–µ–≤–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ network.tf    # –í–∏–∫–ª–∏–∫ –º–æ–¥—É–ª—è –º–µ—Ä–µ–∂—ñ
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ variables.tf  # –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terraform.tfvars  # –ó–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö (IP –¥—ñ–∞–ø–∞–∑–æ–Ω–∏)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ terraform.tf  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ outputs.tf    # –ï–∫—Å–ø–æ—Ä—Ç network_id
    ‚îÇ   ‚îî‚îÄ‚îÄ web/              # –í–µ–±-—Å–µ—Ä–≤–µ—Ä–∏
    ‚îÇ       ‚îú‚îÄ‚îÄ web.tf        # SSH –∫–ª—é—á + –≤–∏–∫–ª–∏–∫ –º–æ–¥—É–ª—è web-and-lb
    ‚îÇ       ‚îú‚îÄ‚îÄ variables.tf  # –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
    ‚îÇ       ‚îú‚îÄ‚îÄ terraform.tfvars  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Å–µ—Ä–≤–µ—Ä—ñ–≤ —Ç–∞ firewall
    ‚îÇ       ‚îú‚îÄ‚îÄ remote_state.tf   # –ß–∏—Ç–∞–Ω–Ω—è network_id –∑ remote state
    ‚îÇ       ‚îú‚îÄ‚îÄ terraform.tf  # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
    ‚îÇ       ‚îú‚îÄ‚îÄ outputs.tf    # –í–∏–≤–æ–¥–∏ (IP –∞–¥—Ä–µ—Å–∏ —Ç–æ—â–æ)
    ‚îÇ       ‚îî‚îÄ‚îÄ files/        # SSH –ø—É–±–ª—ñ—á–Ω—ñ –∫–ª—é—á—ñ
    ‚îú‚îÄ‚îÄ modules/              # –ü–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ Terraform –º–æ–¥—É–ª—ñ
    ‚îÇ   ‚îî‚îÄ‚îÄ hetzner/
    ‚îÇ       ‚îú‚îÄ‚îÄ network/      # –ú–æ–¥—É–ª—å –º–µ—Ä–µ–∂—ñ Hetzner
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ network.tf    # –†–µ—Å—É—Ä—Å–∏ hcloud_network —Ç–∞ subnet
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ variables.tf  # –í—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –º–æ–¥—É–ª—è
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf    # –ï–∫—Å–ø–æ—Ä—Ç network_id
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ versions.tf   # –í–µ—Ä—Å—ñ—ó –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ README.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–æ–¥—É–ª—è (tf-docs)
    ‚îÇ       ‚îî‚îÄ‚îÄ web-and-lb/   # –ú–æ–¥—É–ª—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤ —Ç–∞ Load Balancer
    ‚îÇ           ‚îú‚îÄ‚îÄ web.tf        # Firewall, —Å–µ—Ä–≤–µ—Ä–∏, volumes, placement groups
    ‚îÇ           ‚îú‚îÄ‚îÄ lb.tf         # Load Balancer + —Å–µ—Ä–≤—ñ—Å–∏
    ‚îÇ           ‚îú‚îÄ‚îÄ variables.tf  # –í—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –º–æ–¥—É–ª—è
    ‚îÇ           ‚îú‚îÄ‚îÄ outputs.tf    # –í–∏–≤–æ–¥–∏ –º–æ–¥—É–ª—è
    ‚îÇ           ‚îú‚îÄ‚îÄ versions.tf   # –í–µ—Ä—Å—ñ—ó –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
    ‚îÇ           ‚îî‚îÄ‚îÄ README.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–æ–¥—É–ª—è (tf-docs)
    ‚îî‚îÄ‚îÄ hetzner_key           # –ü—Ä–∏–≤–∞—Ç–Ω–∏–π SSH –∫–ª—é—á
```

---

## üìã –û–ø–∏—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

### Ansible Playbooks

#### –ì–æ–ª–æ–≤–Ω–∏–π Playbook

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `web.yml` | –ì–æ–ª–æ–≤–Ω–∏–π playbook –¥–ª—è –ø—Ä–æ–≤—ñ–∑—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤. –í–∏–∫–æ–Ω—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è apt —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î —Ä–æ–ª—ñ –≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É. |

#### Inventory (Production)

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `inventory/production/web` | –°–ø–∏—Å–æ–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤ –∑ —ó—Ö IP-–∞–¥—Ä–µ—Å–∞–º–∏ —Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ SSH –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è |
| `inventory/production/group_vars/all.yml` | –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ: –ø–∞—Ä–æ–ª—ñ MySQL, —Å–ø–∏—Å–æ–∫ —Å–∞–π—Ç—ñ–≤, –≤–µ—Ä—Å—ñ—è PHP, SSH –ø–æ—Ä—Ç |

#### –†–æ–ª—ñ

| –†–æ–ª—å | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|------|-------------|
| `common` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î –±–∞–∑–æ–≤—ñ –ø–∞–∫–µ—Ç–∏ (git, curl, zip, htop, vim). –°—Ç–≤–æ—Ä—é—î deploy-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ passwordless sudo. |
| `security` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Fail2Ban. –ö–æ–Ω—Ñ—ñ–≥—É—Ä—É—î SSH: root login —Ç—ñ–ª—å–∫–∏ –ø–æ –∫–ª—é—á—É, –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤. |
| `mysql` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î MySQL —Å–µ—Ä–≤–µ—Ä. –í—Å—Ç–∞–Ω–æ–≤–ª—é—î root –ø–∞—Ä–æ–ª—å, —Å—Ç–≤–æ—Ä—é—î –ë–î —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ–¥–∞—Ç–∫—É. |
| `redis` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Redis —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É—î –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ systemd. |
| `php` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î PHP 8.2 FPM –∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º–∏ (mysql, curl, gd, mbstring, xml, zip, bcmath, intl). –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Composer. |
| `nodejs` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Node.js 20.x LTS —á–µ—Ä–µ–∑ NodeSource (–≤–∫–ª—é—á–∞—î npm). |
| `nginx` | –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Nginx. –°—Ç–≤–æ—Ä—é—î vhost –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–ª—è —Å–∞–π—Ç—ñ–≤ –∑ `group_vars`. |
| `deploy` | –ù–∞–ª–∞—à—Ç–æ–≤—É—î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –¥–ª—è –¥–µ–ø–ª–æ—é (–∑ `sites` –∑–º—ñ–Ω–Ω–∏—Ö). |

---

### Terraform

#### –°–µ—Ä–µ–¥–æ–≤–∏—â–µ `hetzner/network`

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `network.tf` | –í–∏–∫–ª–∏–∫ –º–æ–¥—É–ª—è `modules/hetzner/network` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ |
| `variables.tf` | –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö: –Ω–∞–∑–≤–∞ –º–µ—Ä–µ–∂—ñ, IP –¥—ñ–∞–ø–∞–∑–æ–Ω–∏, –∑–æ–Ω–∞ |
| `terraform.tfvars` | –ó–Ω–∞—á–µ–Ω–Ω—è: `first-network`, `172.20.0.0/23`, `eu-central` |
| `outputs.tf` | –ï–∫—Å–ø–æ—Ä—Ç `network_id` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è—Ö |

#### –°–µ—Ä–µ–¥–æ–≤–∏—â–µ `hetzner/web`

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `web.tf` | –°—Ç–≤–æ—Ä—é—î SSH –∫–ª—é—á —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î –º–æ–¥—É–ª—å `web-and-lb` –¥–ª—è —Å–µ—Ä–≤–µ—Ä—ñ–≤ |
| `variables.tf` | –î–µ–∫–ª–∞—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤, firewall –ø—Ä–∞–≤–∏–ª |
| `terraform.tfvars` | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è: —Å–µ—Ä–≤–µ—Ä `pos-web` (ubuntu-24.04, cx23), –ø—Ä–∞–≤–∏–ª–∞ firewall (22, 80, 443, 3600) |
| `remote_state.tf` | –ß–∏—Ç–∞–Ω–Ω—è `network_id` –∑ remote state –º–µ—Ä–µ–∂–µ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó |
| `files/` | –ü—É–±–ª—ñ—á–Ω—ñ SSH –∫–ª—é—á—ñ –¥–ª—è —Å–µ—Ä–≤–µ—Ä—ñ–≤ |

#### –ú–æ–¥—É–ª—å `modules/hetzner/network`

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `network.tf` | –†–µ—Å—É—Ä—Å–∏ `hcloud_network` —Ç–∞ `hcloud_network_subnet` –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ —Ç–∞ –ø—ñ–¥–º–µ—Ä–µ–∂ |
| `variables.tf` | –í—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ: –Ω–∞–∑–≤–∞, IP –¥—ñ–∞–ø–∞–∑–æ–Ω–∏, –∑–æ–Ω–∞, vSwitch –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è |
| `outputs.tf` | –ï–∫—Å–ø–æ—Ä—Ç ID –º–µ—Ä–µ–∂—ñ |

#### –ú–æ–¥—É–ª—å `modules/hetzner/web-and-lb`

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| `web.tf` | Firewall, —Å–µ—Ä–≤–µ—Ä–∏ (`hcloud_server`), volumes (`hcloud_volume`), placement groups |
| `lb.tf` | Load Balancer, –π–æ–≥–æ —Å–µ—Ä–≤—ñ—Å–∏, –º–µ—Ä–µ–∂–µ–≤—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, targets |
| `variables.tf` | –í—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ: —Å–µ—Ä–≤–µ—Ä–∏, firewall –ø—Ä–∞–≤–∏–ª–∞, LB –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ |
| `outputs.tf` | –í–∏–≤–æ–¥–∏ –º–æ–¥—É–ª—è (IP –∞–¥—Ä–µ—Å–∏ —Å–µ—Ä–≤–µ—Ä—ñ–≤) |

---

## üõ†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### Terraform - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

```bash
# 1. –°–ø–æ—á–∞—Ç–∫—É –º–µ—Ä–µ–∂–∞
cd terraform/hetzner/network
terraform init
terraform plan
terraform apply

# 2. –ü–æ—Ç—ñ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∏
cd ../web
terraform init
terraform plan
terraform apply
```

### Ansible - –ø—Ä–æ–≤—ñ–∑—ñ–æ–Ω—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤

```bash
cd ansible-playbooks

# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Ä–æ–ª–µ–π
ansible-playbook -i inventory/production/web web.yml

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ä–æ–ª—ñ
ansible-playbook -i inventory/production/web web.yml --tags nginx
```

---

## üîê –ë–µ–∑–ø–µ–∫–∞

> [!CAUTION]
> –§–∞–π–ª–∏ `terraform.tfvars` —Ç–∞ `group_vars/all.yml` –º—ñ—Å—Ç—è—Ç—å —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ (–ø–∞—Ä–æ–ª—ñ, API —Ç–æ–∫–µ–Ω–∏). –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–æ–Ω–∏:
> - –î–æ–¥–∞–Ω—ñ –¥–æ `.gitignore`
> - –ê–±–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ Ansible Vault / SOPS

---

## üìä –î—ñ–∞–≥—Ä–∞–º–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

```mermaid
graph TB
    subgraph Hetzner Cloud
        subgraph Network["–ü—Ä–∏–≤–∞—Ç–Ω–∞ –º–µ—Ä–µ–∂–∞ 172.20.0.0/23"]
            WEB[pos-web<br/>Ubuntu 24.04<br/>cx23]
        end
        
        FW[Firewall<br/>SSH, HTTP, HTTPS, MySQL]
        
        FW --> WEB
    end
    
    subgraph Software Stack
        WEB --> NGINX[Nginx]
        WEB --> PHP[PHP 8.2 FPM]
        WEB --> MySQL[MySQL]
        WEB --> Redis[Redis]
        WEB --> Node[Node.js 20]
    end
    
    Internet((Internet)) --> FW
```

## üåê –°–∞–π—Ç–∏

| –°–∞–π—Ç | –î–æ–º–µ–Ω | –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è |
|------|-------|------------|
| pos_system | sale-system.shop | /var/www/PosSystem |
| brickcraft | brickcraft.com.ua | /var/www/lego_temp |
